<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Calculateur de Score 4Story</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background-image: url('https://wall.alphacoders.com/big.php?i=235359');
      background-size: cover;
      background-position: center;
      font-family: sans-serif;
    }
    .container {
      max-width: 600px;
      margin: 2rem auto;
      padding: 1rem;
      background: rgba(255,255,255,0.9);
      border-radius: 8px;
    }
    h1 { text-align: center; }
    .form-group { margin-bottom: 1rem; }
    label { display: block; margin-bottom: 0.25rem; }
    input[type="text"], input[type="date"], input[type="url"], input[type="number"] {
      width: 100%; padding: 0.5rem; box-sizing: border-box;
    }
    table {
      border-collapse: collapse;
      margin: 1rem 0;
      width: 100%;
      table-layout: fixed; /* colonnes Ã  largeur fixe */
    }
    /* dÃ©finir des largeurs en % pour les colonnes */
    th:nth-child(1), td:nth-child(1),
    th:nth-child(2), td:nth-child(2),
    th:nth-child(3), td:nth-child(3) {
      width: 23%; /* kills, assists, morts */
    }
    th:nth-child(4), td:nth-child(4) {
      width: 31%; /* score */
    }
    th, td {
      border: 1px solid #333;
      padding: 0.5rem;
      text-align: center;
      background: rgba(255,255,255,0.8);
    }
    input.small {
      width: 100%; /* prend toute la largeur disponible */
      box-sizing: border-box;
    }
    .clean {
      color: #090;
      font-weight: bold;
      margin-top: 0.5rem;
      text-align: center;
    }
    #output {
      width: 100%;
      height: 12rem;
    }
    button {
      padding: 0.5rem 1rem;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Score 4Story</h1>
    <div class="form-group">
      <label for="pseudo">Pseudo :</label>
      <input type="text" id="pseudo" placeholder="Votre pseudo">
    </div>
    <div class="form-group">
      <label for="serveur">Serveur :</label>
      <input type="text" id="serveur" placeholder="Nom du serveur">
    </div>
    <div class="form-group">
      <label for="date">Date du BG :</label>
      <input type="date" id="date">
    </div>
    <table>
      <thead>
        <tr>
          <th>Kills (Ã—2)</th>
          <th>Assists (Ã—1)</th>
          <th>Morts (âˆ’1)</th>
          <th>Score</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><input type="number" id="kills" value="0" min="0" class="small"></td>
          <td><input type="number" id="assists" value="0" min="0" class="small"></td>
          <td><input type="number" id="deaths" value="0" min="0" class="small"></td>
          <td id="score">0</td>
        </tr>
      </tbody>
    </table>
    <p id="bonus" class="clean" style="display:none;">ðŸŽ‰ Clean ! +5 pts bonus</p>
    <div class="form-group">
      <label for="video">Lien vidÃ©o :</label>
      <input type="url" id="video" placeholder="https://">
    </div>
    <button id="generate">GÃ©nÃ©rer le texte & copier</button>
    <div class="form-group">
      <label for="output">Texte Ã  copier :</label>
      <textarea id="output" readonly></textarea>
    </div>
  </div>

  <script>
    const elt = {
      P: document.getElementById('pseudo'),
      Srv: document.getElementById('serveur'),
      Dt: document.getElementById('date'),
      K: document.getElementById('kills'),
      A: document.getElementById('assists'),
      D: document.getElementById('deaths'),
      Scr: document.getElementById('score'),
      B: document.getElementById('bonus'),
      Vid: document.getElementById('video'),
      Out: document.getElementById('output'),
      Btn: document.getElementById('generate')
    };

    function calcScore() {
      const k = +elt.K.value;
      const a = +elt.A.value;
      const d = +elt.D.value;
      let score = k * 2 + a - d;
      if (d === 0 && (k > 0 || a > 0)) {
        score += 5;
        elt.B.style.display = 'block';
      } else {
        elt.B.style.display = 'none';
      }
      elt.Scr.textContent = score;
      return score;
    }

    function formatDate(input) {
      const d = new Date(input);
      if (isNaN(d)) return '';
      const dd = String(d.getDate()).padStart(2, '0');
      const mm = String(d.getMonth() + 1).padStart(2, '0');
      const yyyy = d.getFullYear();
      return `${dd}/${mm}/${yyyy}`;
    }

    function generateText() {
      const pseudo = elt.P.value.trim();
      const serveur = elt.Srv.value.trim();
      const dateBG = formatDate(elt.Dt.value);
      const kills = elt.K.value;
      const assists = elt.A.value;
      const deaths = elt.D.value;
      const score = calcScore();
      const video = elt.Vid.value.trim();

      const text =
`Pseudo : ${pseudo}
Serveur : ${serveur}
Date du BG : ${dateBG}
Kills : ${kills}
Assists : ${assists}
Morts : ${deaths}
Points ((KillsÃ—2)+(AssistsÃ—1)âˆ’(MortsÃ—1)) : ${score}
Lien vidÃ©o : ${video}
Capture d'Ã©cran : `;
      elt.Out.value = text;
      navigator.clipboard.writeText(text).then(() => {
        elt.Btn.textContent = 'CopiÃ© !';
        setTimeout(() => elt.Btn.textContent = 'GÃ©nÃ©rer le texte & copier', 2000);
      });
    }

    [elt.K, elt.A, elt.D].forEach(i => i.addEventListener('input', calcScore));
    elt.Btn.addEventListener('click', generateText);
    calcScore();
  </script>
</body>
</html>
